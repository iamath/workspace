<html>
  <head>
    <meta charset="utf-8" />
    {% include "components/default-styles.njk" %}
    <link rel="stylesheet" href="/assets/css/prestador.css" />
    <link rel="stylesheet" href="/fa/css/all.min.css" />
  </head>
  <body>
    {% include "prestador/navbar.njk" %}
    <div class="main">
      <div class="row pt-3">
        {% include "prestador/sidebar.njk" %}
        <div class="col-9 px-2">
          <div class="col-12 bg-white shadow pt-3 rounded-lg">
            <h4 class="font-weight-bold text-center mb-4">
              Configurações da Conta
            </h4>
            <div class="row">
              <div class="col-6 border-right">
                <h5 class="font-weight-bold">Dados básicos</h5>
                <hr />
                <div class="alert alert-danger" style="display: none" id="erro">
                  Erro: {{ erro }}
                </div>
                <form action="/prestador/atualizar" method="POST">
                  <div class="form-group">
                    <label for="txtNome">Nome</label>
                    <input
                      type="text"
                      name="nome"
                      id="txtNome"
                      class="form-control"
                      value="{{ cookies.nome }}"
                      required
                    />
                  </div>
                  <div class="form-group">
                    <label for="txtEmail">E-Mail</label>
                    <input
                      type="email"
                      name="email"
                      id="txtEmail"
                      class="form-control"
                      value="{{ cookies.email }}"
                      required
                    />
                  </div>
                  <div class="form-group">
                    <label for="txtCelular">Celular</label>
                    <input
                      type="text"
                      name="celular"
                      id="txtCelular"
                      class="form-control"
                      value="{{ cookies.celular }}"
                      required
                    />
                  </div>
                  <div class="form-group">
                    <label for="sltProfissao">Profissão</label>
                    <select
                      name="profissao"
                      id="sltProfissao"
                      class="form-control"
                      required
                    >
                      <option disabled selected hidden>
                        Selecione sua profissão
                      </option>
                      <option class="font-weight-bold" disabled>
                        Assistência Técnica
                      </option>
                      <option value="1">
                        &nbsp;Conserto de eletrodomésticos
                      </option>
                      <option value="2">&nbsp;Reparo de Celular</option>
                      <option value="3">
                        &nbsp;Manutenção de Computador/Notebook
                      </option>
                      <option class="font-weight-bold" disabled>Aulas</option>
                      <option value="4">&nbsp;Professor de Música</option>
                      <option value="5">&nbsp;Professor de Dança</option>
                      <option value="6">&nbsp;Professor de Inglês</option>
                      <option value="7">&nbsp;Professor de Matemática</option>
                      <option class="font-weight-bold" disabled>Autos</option>
                      <option value="8">&nbsp;Táxi</option>
                      <option value="9">&nbsp;Carreto</option>
                      <option value="10">&nbsp;Retirada de Entulho</option>
                      <option value="11">&nbsp;Locação para Viagem</option>
                      <option class="font-weight-bold" disabled>
                        Consultoria
                      </option>
                      <option value="12">&nbsp;Consultoria Empresarial</option>
                      <option value="13">&nbsp;Consultoria de Marketing</option>
                      <option value="14">&nbsp;Consultoria de Finanças</option>
                      <option value="15">
                        &nbsp;Consultoria de Recursos Humanos
                      </option>
                      <option class="font-weight-bold" disabled>
                        Design e Tecnologia
                      </option>
                      <option value="16">&nbsp;Criar Site</option>
                      <option value="17">&nbsp;Editar Vídeo</option>
                      <option value="18">&nbsp;Produzir Música</option>
                      <option value="19">
                        &nbsp;Criação de Identidade Visual
                      </option>
                      <option value="20">&nbsp;Impressão Gráfica</option>
                      <option class="font-weight-bold" disabled>Eventos</option>
                      <option value="21">&nbsp;Cantor</option>
                      <option value="22">&nbsp;DJ</option>
                      <option value="23">&nbsp;Buffet</option>
                      <option class="font-weight-bold" disabled>
                        Moda e Beleza
                      </option>
                      <option value="24">&nbsp;Manicure</option>
                      <option value="25">&nbsp;Cabeleireiro(a)</option>
                      <option value="26">&nbsp;Pedicure</option>
                      <option value="27">&nbsp;Maquiador(a)</option>
                      <option class="font-weight-bold" disabled>
                        Reformas
                      </option>
                      <option value="28">&nbsp;Reforma Residencial</option>
                      <option value="29">&nbsp;Eletricista</option>
                      <option value="30">&nbsp;Jardineiro</option>
                      <option value="31">&nbsp;Manutenção Hidráulica</option>
                      <option class="font-weight-bold" disabled>Saúde</option>
                      <option value="32">&nbsp;Dentista</option>
                      <option value="33">&nbsp;Psicólogo</option>
                      <option value="34">&nbsp;Psiquiatra</option>
                      <option value="35">&nbsp;SPA</option>
                      <option class="font-weight-bold" disabled>
                        Serviços Domésticos
                      </option>
                      <option value="36">&nbsp;Limpeza Doméstica</option>
                      <option value="37">&nbsp;Cuidar de Crianças</option>
                    </select>
                  </div>
                  <button type="submit" class="btn btn-success" id="atualizarDados">
                    <i class="fas fa-redo-alt"></i> Atualizar
                  </button>
                </form>
              </div>
              <div class="col-6">
                <h5 class="font-weight-bold">Ações</h5>
                <hr />
                <div class="col-6 offset-3 d-flex flex-column">
                  <button class="btn btn-primary mb-3" data-toggle="modal" data-target="#modalSenha">
                    <i class="fas fa-key"></i> Alterar senha
                  </button>
                  <button class="btn btn-danger" data-toggle="modal" data-target="#modalExclusao">
                    <i class="fas fa-trash"></i>  Excluir conta
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="modalExclusao" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div
          class="modal-content alert alert-danger"
          style="background: #f8d7da"
        >
          <div class="modal-header">
            <h5 class="modal-title font-weight-bold">
              <i class="fas fa-exclamation-triangle"></i> Atenção!
            </h5>
          </div>
          <div class="modal-body">
            <p class="mb-0">
              Deseja mesmo excluir sua conta? Não será possível recuperar seus
              dados após a exclusão!
            </p>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Cancelar
            </button>
            <form action="/prestador/excluir" method="post" class="mb-0">
              <button type="submit" class="btn btn-danger" id="excluirConta">
                Excluir Conta
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="modalSenha" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title font-weight-bold">
              <i class="fas fa-key"></i>  Alterar senha
            </h5>
          </div>
          <div class="modal-body">
            <form action="/prestador/senha" id="frmSenha" method="post">
              <div class="form-group">
                <label for="txtSenha">Nova senha</label>
                <input
                  type="password"
                  class="form-control"
                  name="senha"
                  id="txtSenha"
                  minlength="8"
                  required
                />
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Cancelar
            </button>
            <input
              type="submit"
              class="btn btn-success"
              id="atualizarSenha"
              form="frmSenha"
              value="Atualizar"
            />
          </div>
        </div>
      </div>
    </div>
    {% include "components/default-scripts.njk" %} {% include
    "components/logoff-script.njk" %}
    <script src="/assets/js/trocaFoto.js"></script>
    <script>
      $('#sltProfissao option[value="{{ cookies.profissao }}"]').attr(
        'selected',
        true
      )
    </script>
    <script src="/assets/js/jquery.mask.min.js"></script>
    <script>
      $('#txtCelular').mask('(00) 00000-0000', {
        onChange: () => {
          $('#atualizarDados').attr('disabled', 'disabled')
        },
        onComplete: () => {
          $('#atualizarDados').removeAttr('disabled')
        }
      })

      $('form').submit(() => {
        $('#excluirConta').attr('disabled', 'disabled')
        $('#atualizarSenha').attr('disabled', 'disabled')
        $('#atualizarDados').attr('disabled', 'disabled')
      })

      {% if erro %}
        $('#erro').slideDown()
      {% endif %}
    </script>
  </body>
</html>
